name: Snyk PR Check

# Trigger the workflow on pull request events
on: [pull_request]

jobs:
  snyk-test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Run Snyk Test
        uses: docker://snyk/snyk:docker-latest
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
          SNYK_ORG: ${{ secrets.SNYK_ORG }}
        with:
          args: sh -c "snyk test --org=${{ secrets.SNYK_ORG }} | tee snyk-output.log"
      
      - name: Display Snyk Test Results
        run: cat snyk-output.log
